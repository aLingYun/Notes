**RISC-V 整型通用寄存器在函数调用规范中的使用情况**
![](Pasted%20image%2020230926231517.png)
**关于函数调用规范规则如下：**
* 函数的前8个参数使用 a0~a7 寄存器传递。
* 如果函数参数多于 8 个，除前 8 个参数使用存器来传递之外，后面的参数使用栈传递。
* 如果传递的参数小于寄存器宽度 (64 位)，那么先按符号扩展到 32 位，再按符号扩展到 64 位。如果传递的参数为寄存器宽度的 2 倍(128 位)，那么将使用一对寄存器来传递该参数。
* 函数的返回参数保存到 a0 和 a1 寄存器中。
* 函数的返回地址保存在 ra 寄存器中。
* 如果子函数里使用 s0~s11 寄存器，那么子函数在使用前需要把这些寄存器的内容保存到栈中，使用完之后再从栈中恢复内容到这些寄存器里。
* 栈向下增长（向较低的地址)，sp 寄存器在进入函数时要对齐到 16 字节边界上。传递给栈的第一个参数位于 sp 寄存器的偏移量 0 处，后续的参数存储在相应的较高地址处。
* 如果GCC使用“-fno-omit-frame-pointer”编译选，那么编译器使用 s0 作为栈指针（Frame Pointer,FP)。